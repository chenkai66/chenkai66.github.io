<!DOCTYPE html>


<html lang="zh-CN">


<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    R语言实战（二） |  言念君子
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
  
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

  
  

  

</head>

</html>

<body>
  <div id="app">
    
      
      <canvas width="1777" height="841"
        style="position: fixed; left: 0px; top: 0px; z-index: 99999; pointer-events: none;"></canvas>
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-R语言实战（二）"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  R语言实战（二）
</h1>
 

    </header>
     
    <div class="article-meta">
      <a href="/posts/5ad0b051.html" class="article-date">
  <time datetime="2020-08-15T08:23:03.294Z" itemprop="datePublished">2020-08-15</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/R/">R</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">6.6k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">30 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <p>R是用于统计分析、绘图的语言和操作环境。R是属于GNU系统的一个自由、免费、源代码开放的软件，它是一个用于统计计算和统计制图的优秀工具。在学习R数据科学之前，我们首先要对R语言的基础语法有一个良好的了解，方便我们理解以后的数据科学算法。本次语法精讲分三次讲完，每次负责讲解其中一部分！<strong>本次的R语言语法精讲（二）主要介绍了 R语言的数据的输入输出以及R语言内置的绘图语法。学完本文后，您将可以具备初步的R语言数据可视化的基本能力并结合R语言语法精讲（一）做简单的数据分析项目以及报告。</strong></p>
<p>本文引用：</p>
<blockquote>
<p>《R语言实战—第2版》————-Robert I.Kabacoff<br>《统计计算与模拟》课程课件———-深圳大学林炳清老师</p>
</blockquote>
<p>本文内容：</p>
<ul>
<li>R常用数据结构</li>
<li>R的运算以及常用函数</li>
<li>R语言编程结构<br>判断if-else<br>循环for、while、repeat<br>自定义函数</li>
<li>R的输入与输出（本文）</li>
<li>R基础绘图（本文）</li>
<li>基本数据管理</li>
<li>高级数据管理</li>
</ul>
<h1 id="1-R的输入与输出"><a href="#1-R的输入与输出" class="headerlink" title="1.R的输入与输出"></a>1.R的输入与输出</h1><h2 id="1-1-导入数据"><a href="#1-1-导入数据" class="headerlink" title="1.1 导入数据"></a>1.1 导入数据</h2><p><strong>(1) 从带分隔符的文本文件导入数据</strong></p>
<p>使用read.table()从带分隔符的文本文件中导入数据。此函数可读入一个表格格式的文件并将其保存为一个数据框。表格的每一行分别出现在文件中每一行。</p>
<p>其语法如下：</p>
<p>mydataframe &lt;- read.table(file, options)</p>
<p>其中，file是一个带分隔符的ASCII文本文件，options是控制如何处理数据的选项。</p>
<p>表2-2列出了常见的选项:</p>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-2bcda690f5e7bb685dc1b89cb27edff6_720w.jpg" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 文件第一行包含表头，指定了列名，可以通过如下步骤读取该文件(注意参数header的设置)</span><br><span class="line">z &#x3D; read.table(&quot;.&#x2F;z1.txt&quot;, header&#x3D;T)</span><br><span class="line">z</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-a0ceb85fcab690ae11475bd78ff9c4c3_720w.jpg" alt="img"></p>
<p><strong>(2) read.csv()读取.csv文件</strong></p>
<p>函数read.csv()可以读取excel文档中后缀为.csv的文件。在函数read.csv()中，参数header的默认值是TRUE。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x &#x3D; read.csv(&quot;.&#x2F;edf.csv&quot;)</span><br><span class="line">x</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-3be8e6f31c414a64a3f895eb5687e35f_720w.jpg" alt="img"></p>
<p><strong>(3) 函数read.csv()网上文件</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">uci &#x3D; &quot;http:&#x2F;&#x2F;archive.ics.uci.edu&#x2F;ml&#x2F;machine-learning-databases&#x2F;&quot;</span><br><span class="line">uci &#x3D; paste(uci, &quot;echocardiogram&#x2F;echocardiogram.data&quot;, sep&#x3D;&quot;&quot;)</span><br><span class="line">ecc&#x3D; read.csv(uci)</span><br><span class="line">head(ecc)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-0367b99a320636b3b68a01997dd955a7_720w.jpg" alt="img"></p>
<p><strong>(4) read.xlsx()读取.xlsx文件</strong></p>
<p>读取后缀为.xlsx的文件的包有很多。在这里，我们介绍的是R包openxlsx。在这个包中，我们可以使用函数read.xlsx()读取xlsx文件 （首次使用，请先安装此包install.packages(“openxlsx”)）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">require(openxlsx)</span><br><span class="line">x &#x3D; read.xlsx(&quot;.&#x2F;abc.xlsx&quot;)</span><br><span class="line">x</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-377507aa46443e2e970faf8c7bb35a0d_720w.jpg" alt="img"></p>
<h2 id="1-2-导出数据"><a href="#1-2-导出数据" class="headerlink" title="1.2 导出数据"></a>1.2 导出数据</h2><p><strong>(1) 函数cat()输出到屏幕</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x &#x3D; &quot;I love R!&quot;</span><br><span class="line">y &#x3D; &quot;R is very powerful!&quot;</span><br><span class="line">cat(x, y)</span><br><span class="line">cat(x, &quot;\n&quot;, y)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-632856de89ecb378c7fc565fd796bee0_720w.jpg" alt="img"></p>
<p><strong>(2) 函数cat()输出到文件</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat(&quot;abc\n&quot;, file&#x3D;&quot;.&#x2F;u.txt&quot;)</span><br><span class="line">cat(&quot;de\n&quot;, file&#x3D;&quot;.&#x2F;u.txt&quot;, append&#x3D;TRUE)</span><br></pre></td></tr></table></figure>
<p>第一次调用函数cat()创建了文件u，包含一行内容abc;第二次调用追加了第二行，内容是de。</p>
<p><strong>(3) 函数write.table()输出到文件</strong></p>
<p>函数write.table()的用法与函数read.table()非常相似，只不过它是把数据框写入文件。例如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">kids &#x3D; c(&quot;jack&quot;, &quot;jill&quot;)</span><br><span class="line">ages &#x3D; c(12, 10)</span><br><span class="line">d &#x3D; data.frame(kids, ages, stringsAsFactors &#x3D; F)</span><br><span class="line">d</span><br><span class="line">write.table(d, &quot;.&#x2F;kds.txt&quot;)</span><br><span class="line"># 如果不需要行名和列名，可以使用参数row.names，col.names</span><br><span class="line">write.table(d, &quot;.&#x2F;kds2.txt&quot;, row.names&#x3D;F, col.names&#x3D;F)</span><br></pre></td></tr></table></figure>
<p><strong>(4) 函数write.csv()输出到文件</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">write.csv(d, &quot;.&#x2F;kds.csv&quot;)</span><br></pre></td></tr></table></figure>
<p><strong>(5) 函数write.xlsx()输出到文件</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">require(openxlsx)</span><br><span class="line">write.xlsx(d, &quot;.&#x2F;kds.xslx&quot;)</span><br></pre></td></tr></table></figure>
<h1 id="2-R基础绘图"><a href="#2-R基础绘图" class="headerlink" title="2.R基础绘图"></a>2.R基础绘图</h1><h2 id="2-1-R绘图的基础设置"><a href="#2-1-R绘图的基础设置" class="headerlink" title="2.1 R绘图的基础设置"></a>2.1 R绘图的基础设置</h2><p><strong>(1) 一个简单的小例子引入</strong></p>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-4772d99e8e1a69328f87826ec7151bcf_720w.jpg" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dose  &lt;- c(20, 30, 40, 45, 60) </span><br><span class="line">drugA &lt;- c(16, 20, 27, 40, 60) </span><br><span class="line">drugB &lt;- c(15, 18, 25, 31, 40)</span><br><span class="line"># 创建一幅描述药物A的剂量和响应关系的图形：</span><br><span class="line">plot(dose, drugA, type&#x3D;&quot;b&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-6fbb86aa5c200784644120f94c094516_720w.jpg" alt="img"></p>
<p>plot()是R中为对象作图的一个泛型函数 （它的输出将根据所绘制对象类型的不同而变化）。 本例中，plot(x, y, type=”b”)将x置于横轴，将y置于纵轴，绘制点集(x,y)，然后使用线段将其连接。选项type=”b”表示同时绘制点和线。使用help(plot)可以查看其他选项。</p>
<p><strong>(2) 图形参数：</strong></p>
<p>我们可以通过修改称为图形参数的选项来自定义一幅图形的多个特征 （字体、颜色、坐标轴、标签等）。</p>
<p><strong>(2.1) 符号和线条</strong>：</p>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-22c8098ffb63668f3c46568ab6987d53_720w.jpg" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 绘制一幅图形，其线条类型为点线，宽度为默认宽度的3倍，点的符号为实心正方形，大小为默认符号大小的2倍</span><br><span class="line">plot(dose, drugA, type&#x3D;&quot;b&quot;, lty&#x3D;3, lwd&#x3D;3, pch&#x3D;15, cex&#x3D;2)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-d4636e1c91c435cdd12b46c21af72ba2_720w.jpg" alt="img"></p>
<p><strong>(2.2) 颜色:</strong></p>
<p>R中有若干和颜色相关的参数。表3-3列出了一些常用参数:</p>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-dcc26577b7778a612b657f6ab8447e91_720w.jpg" alt="img"></p>
<p>在R中，可以通过颜色下标、颜色名称、十六进制的颜色值、RGB值或HSV值来指定颜色。举例来说，col=1、col=”white”、col=”#FFFFFF”、col=rgb(1,1,1)和col=hsv(0,0,1)都是表示白色的等价方式。函数rgb()可基于红－绿－蓝三色值生成颜色，而hsv()则基于色相－饱和度－亮度值来生成颜色。</p>
<p><strong>对于创建吸引人的颜色配对，RColorBrewer特别受到欢迎。注意在第一次使用它之前先进行下载(install.packages(“RColorBrewer”))。安装之后， 使用函数brewer.pal(n, name)来创建一个颜色值的向量。</strong>比如说，以下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 从Set1调色板中抽取了7种用十六进制表示的颜色并返回一个向量。</span><br><span class="line">library(RColorBrewer) </span><br><span class="line">n &lt;- 7 </span><br><span class="line">mycolors &lt;- brewer.pal(n, &quot;Set1&quot;) </span><br><span class="line">barplot(rep(1,n), col&#x3D;mycolors)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-ac71a017baeb0d39b5b5c0552a90f90e_720w.jpg" alt="img"></p>
<p>若要得到所有可选调色板的列表，<a href="https://link.zhihu.com/?target=http%3A//%E8%BE%93%E5%85%A5brewer.pal.info">输入 brewer.pal.info</a>；或者输入display.brewer.all()从而在一个显示输出中产生每个调色板的图形。</p>
<p><strong>(2.3) 文本属性:</strong></p>
<p>图形参数同样可以用来指定字号、字体和字样。表3-4阐释了用于控制文本大小的参数。字体族和字样可以通过字体选项进行控制（见表3-5）</p>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-e5dfe80c174383bf5f228a15cc7f395d_720w.jpg" alt="img"></p>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-eccd8babe0fcca378b87ebc88f4a339b_720w.jpg" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 创建的所有图形都将拥有斜体、1.5倍于默认文本大小的坐标轴标签（名称） ，以及粗斜体、2倍于默认文本大小的标题。</span><br><span class="line">par(font.lab&#x3D;3, cex.lab&#x3D;1.5, font.main&#x3D;4, cex.main&#x3D;2)</span><br><span class="line"># 在Windows系统中，等宽字体映射为TT Courier New，衬线字体映射为TT Times New Roman，无衬线字体则映射为TT Arial（TT代表True Type） </span><br><span class="line">windowsFonts( </span><br><span class="line">  A&#x3D;windowsFont(&quot;Arial Black&quot;), </span><br><span class="line">  B&#x3D;windowsFont(&quot;Bookman Old Style&quot;), </span><br><span class="line">  C&#x3D;windowsFont(&quot;Comic Sans MS&quot;) </span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>(2.4) 图形尺寸与边界尺寸:</strong></p>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-3cf3d890f6348dc987a9b563952603e7_720w.jpg" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 生成一幅4英寸宽、3英寸高、上下边界为1英寸、左边界为0.5英寸、右边界为0.2英寸的图形</span><br><span class="line">par(pin&#x3D;c(4,3), mai&#x3D;c(1,.5, 1, .2))</span><br></pre></td></tr></table></figure>
<p><strong>(2.5) 使用图形参数控制图形外观例子:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">dose  &lt;- c(20, 30, 40, 45, 60) </span><br><span class="line">drugA &lt;- c(16, 20, 27, 40, 60) </span><br><span class="line">drugB &lt;- c(15, 18, 25, 31, 40) </span><br><span class="line"> </span><br><span class="line">opar &lt;- par(no.readonly&#x3D;TRUE)</span><br><span class="line">par(mfrow&#x3D;c(1,2),pin&#x3D;c(2, 3),opar) </span><br><span class="line">par(lwd&#x3D;2, cex&#x3D;1.5) </span><br><span class="line">par(cex.axis&#x3D;.75, font.axis&#x3D;3) </span><br><span class="line">plot(dose, drugA, type&#x3D;&quot;b&quot;, pch&#x3D;19, lty&#x3D;2, col&#x3D;&quot;red&quot;) </span><br><span class="line">plot(dose, drugB, type&#x3D;&quot;b&quot;, pch&#x3D;23, lty&#x3D;6, col&#x3D;&quot;blue&quot;, bg&#x3D;&quot;green&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-6091b253b6ca199ce33d1e74ba36e68e_720w.jpg" alt="img"></p>
<p><strong>(3) 添加文本、自定义坐标轴和图例</strong></p>
<p>除了图形参数，许多高级绘图函数（例如plot、hist、boxplot）也允许自行设定坐标轴和文本标注选项。举例来说，以下代码在图形上添加了标题（main） 、副标题（sub） 、坐标轴标签（xlab、ylab）并指定了坐标轴范围（xlim、ylim）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plot(dose, drugA, type&#x3D;&quot;b&quot;,  </span><br><span class="line">     col&#x3D;&quot;red&quot;, lty&#x3D;2, pch&#x3D;2, lwd&#x3D;2, </span><br><span class="line">     main&#x3D;&quot;Clinical Trials for Drug A&quot;, </span><br><span class="line">     sub&#x3D;&quot;This is hypothetical data&quot;, </span><br><span class="line">     xlab&#x3D;&quot;Dosage&quot;, ylab&#x3D;&quot;Drug Response&quot;, </span><br><span class="line">     xlim&#x3D;c(0, 60), ylim&#x3D;c(0, 70))</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-694d49033888a017014e1ab5a22bd97c_720w.jpg" alt="img"></p>
<p><strong>(3.1) 标题:</strong></p>
<p>使用title()函数为图形添加标题和坐标轴标签。调用格式为：</p>
<p>title(main=”main title”, sub=”subtitle”,</p>
<p>xlab=”x-axis label”, ylab=”y-axis label”)</p>
<p>函数title()中亦可指定其他图形参数（如文本大小、字体、旋转角度和颜色） 。</p>
<p>函数title()一般来说被用于添加信息到一个默认标题和坐标轴标签被ann=FALSE选项移除的图形中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">par(ann&#x3D;FALSE)   # 不生成默认坐标轴标签</span><br><span class="line">plot(dose, drugA, type&#x3D;&quot;b&quot;,  </span><br><span class="line">     col&#x3D;&quot;red&quot;, lty&#x3D;2, pch&#x3D;2, lwd&#x3D;2, </span><br><span class="line">     xlim&#x3D;c(0, 60), ylim&#x3D;c(0, 70))</span><br><span class="line"># 生成红色的标题和蓝色的副标题，以及比默认大小小25%的绿色x轴、y轴标签</span><br><span class="line">title(main&#x3D;&quot;My Title&quot;, col.main&#x3D;&quot;red&quot;,  </span><br><span class="line">      sub&#x3D;&quot;My Subtitle&quot;, col.sub&#x3D;&quot;blue&quot;, </span><br><span class="line">      xlab&#x3D;&quot;My X label&quot;, ylab&#x3D;&quot;My Y label&quot;, </span><br><span class="line">      col.lab&#x3D;&quot;green&quot;, cex.lab&#x3D;0.75)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-dfc9768313e9514e6c924f792ba49e4f_720w.jpg" alt="img"></p>
<p><strong>(3.2) 坐标轴:</strong></p>
<p>可以使用函数axis()来创建自定义的坐标轴，而非使用R中的默认坐标轴。其格式为：</p>
<p>axis(side, at=, labels=, pos=, lty=, col=, las=, tck=, …)</p>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-d674f67eb096fe0e5d8e9dc8080a391a_720w.jpg" alt="img"></p>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-7889cd51fecfcd0619f6f6ae9d6a7dca_720w.jpg" alt="img"></p>
<p>创建自定义坐标轴时，你应当禁用高级绘图函数自动生成的坐标轴。参数axes=FALSE将禁用全部坐标轴（包括坐标轴框架线，除非你添加了参数frame.plot=TRUE） 。参数xaxt=”n”和yaxt=”n”将分别禁用X轴或Y轴（会留下框架线，只是去除了刻度） 。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- c(1:10) </span><br><span class="line">y &lt;- x  </span><br><span class="line">z &lt;- 10&#x2F;x </span><br><span class="line">opar &lt;- par(no.readonly&#x3D;TRUE)  </span><br><span class="line">par(opar)</span><br><span class="line">par(mar&#x3D;c(5, 4, 4, 8) + 0.1)  </span><br><span class="line">plot(x, y, type&#x3D;&quot;b&quot;,  </span><br><span class="line">     pch&#x3D;21, col&#x3D;&quot;red&quot;, </span><br><span class="line">     yaxt&#x3D;&quot;n&quot;, lty&#x3D;3, ann&#x3D;FALSE) </span><br><span class="line">lines(x, z, type&#x3D;&quot;b&quot;, pch&#x3D;22, col&#x3D;&quot;blue&quot;, lty&#x3D;2) </span><br><span class="line"> </span><br><span class="line">axis(2, at&#x3D;x, labels&#x3D;x, col.axis&#x3D;&quot;red&quot;, las&#x3D;2)  </span><br><span class="line"> </span><br><span class="line">axis(4, at&#x3D;z, labels&#x3D;round(z, digits&#x3D;2), </span><br><span class="line">     col.axis&#x3D;&quot;blue&quot;, las&#x3D;2, cex.axis&#x3D;0.7, tck&#x3D;-.01)  </span><br><span class="line"> </span><br><span class="line">mtext(&quot;y&#x3D;1&#x2F;x&quot;, side&#x3D;4, line&#x3D;3, cex.lab&#x3D;1, las&#x3D;2, col&#x3D;&quot;blue&quot;) </span><br><span class="line"> </span><br><span class="line">title(&quot;An Example of Creative Axes&quot;,  </span><br><span class="line">      xlab&#x3D;&quot;X values&quot;, </span><br><span class="line">      ylab&#x3D;&quot;Y&#x3D;X&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-f64f8deb4036bfc3976293fb3cb399cd_720w.jpg" alt="img"></p>
<p><strong>(3.3) 参考线:</strong></p>
<p>函数abline()可以用来为图形添加参考线。其使用格式为：</p>
<p>abline(h=yvalues, v=xvalues)</p>
<p>函数abline()中也可以指定其他图形参数（如线条类型、颜色和宽度）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plot(x, y, type&#x3D;&quot;b&quot;,  </span><br><span class="line">     pch&#x3D;21, col&#x3D;&quot;red&quot;, </span><br><span class="line">     yaxt&#x3D;&quot;n&quot;, lty&#x3D;3, ann&#x3D;FALSE) </span><br><span class="line"># 为1、3、5、7、9的位置添加了垂直的蓝色虚线</span><br><span class="line">abline(v&#x3D;seq(1, 10, 2), lty&#x3D;2, col&#x3D;&quot;blue&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-de2459e13da3eb3d944446cc01696cec_720w.jpg" alt="img"></p>
<p><strong>(3.4) 图例:</strong></p>
<p>当图形中包含的数据不止一组时，图例可以帮助你辨别出每个条形、扇形区域或折线各代表哪一类数据。我们可以使用函数legend()来添加图例（果然不出所料） 。其使用格式为：</p>
<p>legend(location, title, legend, …)</p>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-caee56fd438e7b47bb1f6c08c7d90264_720w.jpg" alt="img"></p>
<p>其他常用的图例选项包括用于指定盒子样式的bty、指定背景色的bg、指定大小的cex，以及指定文本颜色的text.col。指定horiz=TRUE将会水平放置图例，而不是垂直放置。关于图例的更多细节，请参考help(legend)。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">dose  &lt;- c(20, 30, 40, 45, 60)  </span><br><span class="line">drugA &lt;- c(16, 20, 27, 40, 60) </span><br><span class="line">drugB &lt;- c(15, 18, 25, 31, 40) </span><br><span class="line"> </span><br><span class="line">opar &lt;- par(no.readonly&#x3D;TRUE) </span><br><span class="line">par(opar)</span><br><span class="line">par(lwd&#x3D;2, cex&#x3D;1.5, font.lab&#x3D;2)</span><br><span class="line">plot(dose, drugA, type&#x3D;&quot;b&quot;, </span><br><span class="line">     pch&#x3D;15, lty&#x3D;1, col&#x3D;&quot;red&quot;, ylim&#x3D;c(0, 60),  </span><br><span class="line">     main&#x3D;&quot;Drug A vs. Drug B&quot;, </span><br><span class="line">     xlab&#x3D;&quot;Drug Dosage&quot;, ylab&#x3D;&quot;Drug Response&quot;)  </span><br><span class="line"> </span><br><span class="line">lines(dose, drugB, type&#x3D;&quot;b&quot;, </span><br><span class="line">      pch&#x3D;17, lty&#x3D;2, col&#x3D;&quot;blue&quot;) </span><br><span class="line"> </span><br><span class="line">abline(h&#x3D;c(30), lwd&#x3D;1.5, lty&#x3D;2, col&#x3D;&quot;gray&quot;) </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">legend(&quot;topleft&quot;, inset&#x3D;.05, title&#x3D;&quot;Drug Type&quot;, c(&quot;A&quot;,&quot;B&quot;) ,lty&#x3D;c(1, 2), pch&#x3D;c(15, 17), col&#x3D;c(&quot;red&quot;, &quot;blue&quot;))</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-721294eb02e466621734aee77606f3d4_720w.jpg" alt="img"></p>
<p><strong>(3.5) 文本标注:</strong></p>
<p>可以通过函数text()和mtext()将文本添加到图形上。text()可向绘图区域内部添加文本，而mtext()则向图形的四个边界之一添加文本。使用格式分别为：</p>
<p>text(location, “text to place”, pos, …)</p>
<p>mtext(“text to place”, side, line=n, …)</p>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-bf68ca4eae613ac8d395a588200f3e3f_720w.jpg" alt="img"></p>
<p>其他常用的选项有cex、col和font（分别用来调整字号、颜色和字体样式） 。</p>
<p>除了用来添加文本标注以外，text()函数也通常用来标示图形中的点。我们只需指定一系列的x、y坐标作为位置参数，同时以向量的形式指定要放置的文本。x、y和文本标签向量的长度应当相同。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">attach(mtcars) </span><br><span class="line">plot(wt, mpg, </span><br><span class="line">     main&#x3D;&quot;Mileage vs. Car Weight&quot;, </span><br><span class="line">     xlab&#x3D;&quot;Weight&quot;, ylab&#x3D;&quot;Mileage&quot;, </span><br><span class="line">     pch&#x3D;18, col&#x3D;&quot;blue&quot;) </span><br><span class="line">text(wt, mpg, </span><br><span class="line">     row.names(mtcars), </span><br><span class="line">     cex&#x3D;0.6, pos&#x3D;4, col&#x3D;&quot;red&quot;) </span><br><span class="line">detach(mtcars)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-e541b01550b094f2426a733c41aaddaa_720w.jpg" alt="img"></p>
<p><strong>(3.6) 数学标注:</strong></p>
<p>函数plotmath()可以为图形主体或边界上的标题、坐标轴名称或文本标注添加数学符号。</p>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-6f90b9d000def6d2d6da3857022e0c65_720w.jpg" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x &#x3D; seq(-2, 2, 0.5)</span><br><span class="line">plot(x, x^2, type&#x3D;&quot;l&quot;, main&#x3D;expression(paste(&quot;f(x)&#x3D;&quot;,x^2)), ylab&#x3D;expression(x^2), cex.axis&#x3D;1.2, cex.lab&#x3D;1.2, cex.main&#x3D;1.2, lwd&#x3D;2, xlim&#x3D;c(-3, 3), ylim&#x3D;c(-1, 5))</span><br><span class="line">points(x, x^2+0.5, type&#x3D;&quot;b&quot;, lwd&#x3D;3, lty&#x3D;2)</span><br><span class="line">points(x, x^2-0.5, pch&#x3D;10, lwd&#x3D;1)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-e79cb4a8cbc3ddda1e9d19865607d55a_720w.jpg" alt="img"></p>
<p><strong>(4) 图形组合：</strong></p>
<p>在R中使用函数par()或layout()可以容易地组合多幅图形为一幅总括图形。</p>
<p>可以在par()函数中使用图形参数mfrow=c(nrows,ncols)来创建按行填充的、行数为nrows、列数为ncols的图形矩阵。另外，可以使用mfcol=c(nrows, ncols)按列填充矩阵。</p>
<p><strong>(4.1) 示例1</strong>：创建了四幅图形并将其排布在两行两列中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">attach(mtcars) </span><br><span class="line">opar &lt;- par(no.readonly&#x3D;TRUE) </span><br><span class="line">par(mfrow&#x3D;c(2,2))</span><br><span class="line">plot(wt,mpg, main&#x3D;&quot;Scatterplot of wt vs. mpg&quot;) </span><br><span class="line">plot(wt,disp, main&#x3D;&quot;Scatterplot of wt vs. disp&quot;) </span><br><span class="line">hist(wt, main&#x3D;&quot;Histogram of wt&quot;) </span><br><span class="line">boxplot(wt, main&#x3D;&quot;Boxplot of wt&quot;) </span><br><span class="line">par(opar) </span><br><span class="line">detach(mtcars)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-e84469fc8ec4bb0d16835c20abf477f0_720w.jpg" alt="img"></p>
<p><strong>(4.2) 示例2：</strong>依三行一列排布三幅图形</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">attach(mtcars) </span><br><span class="line">opar &lt;- par(no.readonly&#x3D;TRUE) </span><br><span class="line">par(mfrow&#x3D;c(3,1)) </span><br><span class="line">hist(wt) </span><br><span class="line">hist(mpg) </span><br><span class="line">hist(disp) </span><br><span class="line">par(opar) </span><br><span class="line">detach(mtcars)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-6c345e92e6a5e9d7daff75afd3c740c2_720w.jpg" alt="img"></p>
<p><strong>(4.3) 示例3：</strong>函数layout()的调用形式为layout(mat)，其中的mat是一个矩阵，它指定了所要组合的多个图形的所在位置。在以下代码中，一幅图被置于第1行，另两幅图则被置于第2行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">attach(mtcars) </span><br><span class="line">layout(matrix(c(1,1,2,3), 2, 2, byrow &#x3D; TRUE)) </span><br><span class="line">hist(wt) </span><br><span class="line">hist(mpg) </span><br><span class="line">hist(disp) </span><br><span class="line">detach(mtcars)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-93b1871008a8395326a0f88b16659127_720w.jpg" alt="img"></p>
<p><strong>(4.4) 示例4:</strong>为了更精确地控制每幅图形的大小，可以有选择地在layout()函数中使用widths=和heights=两个参数。其形式为：</p>
<p>widths = 各列宽度值组成的一个向量</p>
<p>heights = 各行高度值组成的一个向量</p>
<p>相对宽度可以直接通过数值指定，绝对宽度（以厘米为单位）可以通过函数lcm()来指定。</p>
<p>在以下代码中，我们再次将一幅图形置于第1行，两幅图形置于第2行。但第1行中图形的高度是第2行中图形高度的二分之一。除此之外，右下角图形的宽度是左下角图形宽度的三分之一 :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">attach(mtcars) </span><br><span class="line">layout(matrix(c(1, 1, 2, 3), 2, 2, byrow &#x3D; TRUE), </span><br><span class="line">       widths&#x3D;c(3, 1), heights&#x3D;c(1, 2)) </span><br><span class="line">hist(wt) </span><br><span class="line">hist(mpg) </span><br><span class="line">hist(disp) </span><br><span class="line">detach(mtcars)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-f59067d2d1726dc02e557581233e6520_720w.jpg" alt="img"></p>
<p><strong>(5) 图形布局的精细控制</strong></p>
<p>可能有很多时候，你想通过排布或叠加若干图形来创建单幅的、有意义的图形，这需要有对图形布局的精细控制能力。你可以使用图形参数fig=完成这个任务。 参数fig=的取值是一个形如c(x1, x2, y1, y2)的数值向量。</p>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-c7928563ef2c59d852074423fb376907_720w.jpg" alt="img"></p>
<p>第一个fig=将散点图设定为占据横向范围0~0.8，纵向范围0~0.8。上方的箱线图横向占据0~0.8，纵向0.55~1。右侧的箱线图横向占据0.65~1，纵向0~0.8。fig=默认会新建一幅图形，所以在添加一幅图到一幅现有图形上时，请设定参数new=TRUE。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 在散点图上添加两幅箱线图，创建了单幅的增强型图形</span><br><span class="line">opar &lt;- par(no.readonly&#x3D;TRUE) </span><br><span class="line">par(fig&#x3D;c(0, 0.8, 0, 0.8))  </span><br><span class="line">plot(mtcars$wt, mtcars$mpg, </span><br><span class="line">     xlab&#x3D;&quot;Miles Per Gallon&quot;, </span><br><span class="line">     ylab&#x3D;&quot;Car Weight&quot;) </span><br><span class="line">par(fig&#x3D;c(0, 0.8, 0.55, 1), new&#x3D;TRUE) </span><br><span class="line">boxplot(mtcars$wt, horizontal&#x3D;TRUE, axes&#x3D;FALSE)  </span><br><span class="line"> </span><br><span class="line">par(fig&#x3D;c(0.65, 1, 0, 0.8), new&#x3D;TRUE) </span><br><span class="line">boxplot(mtcars$mpg, axes&#x3D;FALSE)</span><br><span class="line">mtext(&quot;Enhanced Scatterplot&quot;, side&#x3D;3, outer&#x3D;TRUE, line&#x3D;-3) </span><br><span class="line"> </span><br><span class="line">par(opar)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-03aab7b882b8d083b1cd8239c93e9cdf_720w.jpg" alt="img"></p>
<h2 id="2-2-R绘图的基本图形"><a href="#2-2-R绘图的基本图形" class="headerlink" title="2.2 R绘图的基本图形"></a>2.2 R绘图的基本图形</h2><p><strong>(1) 条形图</strong></p>
<p>条形图通过垂直的或水平的条形展示了类别型变量的分布（频数） 。函数barplot()的最简单用法是：</p>
<p>barplot(height) ，其中的height是一个向量或一个矩阵。</p>
<p><strong>(1.1) 简单的条形图</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">library(vcd) </span><br><span class="line"># 变量Improved记录了对每位接受了安慰剂或药物治疗的病人的治疗结果</span><br><span class="line">counts &lt;- table(Arthritis$Improved) </span><br><span class="line">counts </span><br><span class="line"># 简单条形图</span><br><span class="line">barplot(counts,  </span><br><span class="line">       main&#x3D;&quot;Simple Bar Plot&quot;, </span><br><span class="line">       xlab&#x3D;&quot;Improvement&quot;, ylab&#x3D;&quot;Frequency&quot;) </span><br><span class="line"># 水平条形图</span><br><span class="line">barplot(counts, </span><br><span class="line">       main&#x3D;&quot;Horizontal Bar Plot&quot;, </span><br><span class="line">       xlab&#x3D;&quot;Frequency&quot;, ylab&#x3D;&quot;Improvement&quot;,  </span><br><span class="line">       horiz&#x3D;TRUE)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-48dd29f7f75afa13ecf30028c850ae61_720w.jpg" alt="img"></p>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-2c00b4ee98cf70f6037f5509e879c830_720w.jpg" alt="img"></p>
<p><strong>(1.2) 堆砌条形图和分组条形图</strong></p>
<p>如果height是一个矩阵而不是一个向量，则绘图结果将是一幅堆砌条形图或分组条形图。</p>
<p>若beside=FALSE（默认值） ，则矩阵中的每一列都将生成图中的一个条形，各列中的值将给出堆砌的“子条”的高度。</p>
<p>若beside=TRUE，则矩阵中的每一列都表示一个分组，各列中的值将并列而不是堆砌。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">library(vcd)</span><br><span class="line">counts &lt;- table(Arthritis$Improved, Arthritis$Treatment) </span><br><span class="line">counts </span><br><span class="line"># 堆砌条形图</span><br><span class="line">barplot(counts, </span><br><span class="line">     main&#x3D;&quot;Stacked Bar Plot&quot;,  </span><br><span class="line">     xlab&#x3D;&quot;Treatment&quot;, ylab&#x3D;&quot;Frequency&quot;, </span><br><span class="line">     col&#x3D;c(&quot;red&quot;, &quot;yellow&quot;,&quot;green&quot;), </span><br><span class="line">     legend&#x3D;rownames(counts))</span><br><span class="line"># 分组条形图</span><br><span class="line">barplot(counts, </span><br><span class="line">     main&#x3D;&quot;Grouped Bar Plot&quot;, </span><br><span class="line">     xlab&#x3D;&quot;Treatment&quot;, ylab&#x3D;&quot;Frequency&quot;, </span><br><span class="line">     col&#x3D;c(&quot;red&quot;, &quot;yellow&quot;, &quot;green&quot;), </span><br><span class="line">     legend&#x3D;rownames(counts), beside&#x3D;TRUE)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-c52c823982317fac7de81e4cfcac4241_720w.jpg" alt="img"></p>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-4b9bc3b71dc3c6674779bcfffd0bfe82_720w.jpg" alt="img"></p>
<p><strong>(1.3) 均值条形图</strong></p>
<p>条形图并不一定要基于计数数据或频率数据。你可以使用数据整合函数并将结果传递给barplot()函数，来创建表示均值、中位数、标准差等的条形图。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">states &lt;- data.frame(state.region, state.x77) </span><br><span class="line">means &lt;- aggregate(states$Illiteracy, by&#x3D;list(state.region), FUN&#x3D;mean) </span><br><span class="line">means </span><br><span class="line"># 将均值从小到大排序</span><br><span class="line">means &lt;- means[order(means$x),]</span><br><span class="line">means </span><br><span class="line">barplot(means$x, names.arg&#x3D;means$Group.1)</span><br><span class="line">title(&quot;Mean Illiteracy Rate&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-86482e96dc2914c2fa25df0738395a7d_720w.jpg" alt="img"></p>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-28ff7aca91c26f2431a7f740eced3583_720w.jpg" alt="img"></p>
<p><strong>(1.4) 荆棘图</strong></p>
<p>棘状图对堆砌条形图进行了重缩放，这样每个条形的高度均为1，每一段的高度即表示比例。棘状图可由vcd包中的函数spine()绘制。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">library(vcd) </span><br><span class="line">attach(Arthritis) </span><br><span class="line">counts &lt;- table(Treatment, Improved) </span><br><span class="line">spine(counts, main&#x3D;&quot;Spinogram Example&quot;) </span><br><span class="line">detach(Arthritis)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-7069fd3c44d5d03948063c64d6ce4fac_720w.jpg" alt="img"></p>
<p><strong>(2) 饼图</strong></p>
<p>饼图可由以下函数创建：</p>
<p>pie(x, labels)</p>
<p>其中x是一个非负数值向量， 表示每个扇形的面积， 而labels则是表示各扇形标签的字符型向量。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">par(mfrow&#x3D;c(2, 2))  </span><br><span class="line">slices &lt;- c(10, 12,4, 16, 8)  </span><br><span class="line">lbls &lt;- c(&quot;US&quot;, &quot;UK&quot;, &quot;Australia&quot;, &quot;Germany&quot;, &quot;France&quot;) </span><br><span class="line">pie(slices, labels &#x3D; lbls, </span><br><span class="line">    main&#x3D;&quot;Simple Pie Chart&quot;) </span><br><span class="line"> </span><br><span class="line">pct &lt;- round(slices&#x2F;sum(slices)*100) </span><br><span class="line">lbls2 &lt;- paste(lbls, &quot; &quot;, pct, &quot;%&quot;, sep&#x3D;&quot;&quot;) </span><br><span class="line">pie(slices, labels&#x3D;lbls2, col&#x3D;rainbow(length(lbls2)),  </span><br><span class="line">    main&#x3D;&quot;Pie Chart with Percentages&quot;) </span><br><span class="line">library(plotrix) </span><br><span class="line">pie3D(slices, labels&#x3D;lbls,explode&#x3D;0.1, </span><br><span class="line">      main&#x3D;&quot;3D Pie Chart &quot;)  </span><br><span class="line">mytable &lt;- table(state.region)  </span><br><span class="line">lbls3 &lt;- paste(names(mytable), &quot;\n&quot;, mytable, sep&#x3D;&quot;&quot;) </span><br><span class="line">pie(mytable, labels &#x3D; lbls3, </span><br><span class="line">    main&#x3D;&quot;Pie Chart from a Table\n (with sample sizes)&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-abf72d617493d4e802ffb8618f03b114_720w.jpg" alt="img"></p>
<p>扇形图提供了一种同时展示相对数量和相互差异的方法。在R中，扇形图是通过plotrix包中的fan.plot()函数实现的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">library(plotrix) </span><br><span class="line">slices &lt;- c(10, 12,4, 16, 8) </span><br><span class="line">lbls &lt;- c(&quot;US&quot;, &quot;UK&quot;, &quot;Australia&quot;, &quot;Germany&quot;, &quot;France&quot;) </span><br><span class="line">fan.plot(slices, labels &#x3D; lbls, main&#x3D;&quot;Fan Plot&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-6c979ae6ad79f2fa1cb97b7a4a8d3baa_720w.jpg" alt="img"></p>
<p><strong>(3) 直方图</strong></p>
<p>直方图通过在x轴上将值域分割为一定数量的组，在y轴上显示相应值的频数，展示了连续型变量的分布。可以使用如下函数创建直方图：</p>
<p>hist(x)</p>
<p>其中的x是一个由数据值组成的数值向量。参数freq=FALSE表示根据概率密度而不是频数绘制图形。参数breaks用于控制组的数量。在定义直方图中的单元时，默认将生成等距切分。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">par(mfrow&#x3D;c(2,2)) </span><br><span class="line">  </span><br><span class="line">hist(mtcars$mpg)  </span><br><span class="line"> </span><br><span class="line">hist(mtcars$mpg, </span><br><span class="line">     breaks&#x3D;12, </span><br><span class="line">     col&#x3D;&quot;red&quot;, </span><br><span class="line">     xlab&#x3D;&quot;Miles Per Gallon&quot;, </span><br><span class="line">     main&#x3D;&quot;Colored histogram with 12 bins&quot;) </span><br><span class="line"> </span><br><span class="line">hist(mtcars$mpg, </span><br><span class="line">     freq&#x3D;FALSE, </span><br><span class="line">     breaks&#x3D;12, </span><br><span class="line">     col&#x3D;&quot;red&quot;, </span><br><span class="line">     xlab&#x3D;&quot;Miles Per Gallon&quot;, </span><br><span class="line">     main&#x3D;&quot;Histogram, rug plot, density curve&quot;)  </span><br><span class="line">rug(jitter(mtcars$mpg)) </span><br><span class="line">lines(density(mtcars$mpg), col&#x3D;&quot;blue&quot;, lwd&#x3D;2) </span><br><span class="line"> </span><br><span class="line">x &lt;- mtcars$mpg </span><br><span class="line">h&lt;-hist(x, </span><br><span class="line">        breaks&#x3D;12, </span><br><span class="line">        col&#x3D;&quot;red&quot;, </span><br><span class="line">        xlab&#x3D;&quot;Miles Per Gallon&quot;, </span><br><span class="line">        main&#x3D;&quot;Histogram with normal curve and box&quot;) </span><br><span class="line">xfit&lt;-seq(min(x), max(x), length&#x3D;40) </span><br><span class="line">yfit&lt;-dnorm(xfit, mean&#x3D;mean(x), sd&#x3D;sd(x)) </span><br><span class="line">yfit &lt;- yfit*diff(h$mids[1:2])*length(x)  </span><br><span class="line">lines(xfit, yfit, col&#x3D;&quot;blue&quot;, lwd&#x3D;2) </span><br><span class="line">box()</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-7cc8ce761e9aeca0a0d5285d03b16203_720w.jpg" alt="img"></p>
<p><strong>(4) 核密度图</strong></p>
<p>核密度估计是用于估计随机变量概率密度函数的一种非参数方法。从总体上讲，核密度图不失为一种用来观察连续型变量分布的有效方法。绘制密度图的方法（不叠加到另一幅图上方）为：</p>
<p>plot(density(x)) 其中的x是一个数值型向量。</p>
<p>由于plot()函数会创建一幅新的图形，所以要向一幅已经存在的图形上叠加一条密度曲线，可以使用lines()函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">par(mfrow&#x3D;c(2,1)) </span><br><span class="line">d &lt;- density(mtcars$mpg) </span><br><span class="line">plot(d)  </span><br><span class="line">d &lt;- density(mtcars$mpg)  </span><br><span class="line">plot(d, main&#x3D;&quot;Kernel Density of Miles Per Gallon&quot;) </span><br><span class="line"># 将曲线修改为蓝色，并使用实心红色填充曲线下方的区域 </span><br><span class="line"># polygon()函数根据顶点的x和y坐标（本例中由density()函数提供）绘制了多边形。 </span><br><span class="line">polygon(d, col&#x3D;&quot;red&quot;, border&#x3D;&quot;blue&quot;) </span><br><span class="line"># 添加棕色的轴须图 </span><br><span class="line">rug(mtcars$mpg, col&#x3D;&quot;brown&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-46816645fcfd87bf2673d2cb8b3d9d63_720w.jpg" alt="img"></p>
<p><a href="https://link.zhihu.com/?target=http%3A//%E4%BD%BF%E7%94%A8sm%E5%8C%85%E4%B8%AD%E7%9A%84sm.density.compare">使用sm包中的sm.density.compare</a>()函数可向图形叠加两组或更多的核密度图。使用格式为：</p>
<p><a href="https://link.zhihu.com/?target=http%3A//sm.density.compare">sm.density.compare</a>(x, factor) 其中的x是一个数值型向量，factor是一个分组变量。请在第一次使用sm包之前安装它。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">library(sm)  </span><br><span class="line">attach(mtcars) </span><br><span class="line"> </span><br><span class="line">cyl.f &lt;- factor(cyl, levels&#x3D; c(4,6,8), </span><br><span class="line">              labels &#x3D; c(&quot;4 cylinder&quot;, &quot;6 cylinder&quot;,  </span><br><span class="line">                         &quot;8 cylinder&quot;)) </span><br><span class="line"> </span><br><span class="line">sm.density.compare(mpg, cyl, xlab&#x3D;&quot;Miles Per Gallon&quot;) </span><br><span class="line">title(main&#x3D;&quot;MPG Distribution by Car Cylinders&quot;) </span><br><span class="line"> </span><br><span class="line">detach(mtcars)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-5211f46ac859cc57836f32fc2d382079_720w.jpg" alt="img"></p>
<p><strong>(5) 箱线图</strong></p>
<p>箱线图（又称盒须图）通过绘制连续型变量的五数总括，即最小值、下四分位数（第25百分位数）、中位数（第50百分位数）、上四分位数（第75百分位数）以及最大值，描述了连续型变量的分布。箱线图能够显示出可能为离群点（范围±1.5*IQR以外的值，IQR表示四分位距，即上四分位数与下四分位数的差值）的观测。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">boxplot(mtcars$mpg, main&#x3D;&quot;Box plot&quot;, ylab&#x3D;&quot;Miles per Gallon&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-a8c4ac7a9823054b18d7699759bc08fd_720w.jpg" alt="img"></p>
<p>我们使用并列箱线图重新研究了四缸、六缸、八缸发动机对每加仑汽油行驶的英里数的影响。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">boxplot(mpg ~ cyl, data&#x3D;mtcars, </span><br><span class="line">        main&#x3D;&quot;Car Mileage Data&quot;,  </span><br><span class="line">        xlab&#x3D;&quot;Number of Cylinders&quot;, </span><br><span class="line">        ylab&#x3D;&quot;Miles Per Gallon&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-cae2e3bc1592dc13a9f91c4b03371642_720w.jpg" alt="img"></p>
<p>最后，你可以为多个分组因子绘制箱线图。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 创建汽缸数量的因子 </span><br><span class="line">mtcars$cyl.f &lt;- factor(mtcars$cyl, </span><br><span class="line">                      levels&#x3D;c(4,6,8),  </span><br><span class="line">                      labels&#x3D;c(&quot;4&quot;,&quot;6&quot;,&quot;8&quot;)) </span><br><span class="line"># 创建变速箱类型的因子 </span><br><span class="line">mtcars$am.f &lt;- factor(mtcars$am, </span><br><span class="line">                     levels&#x3D;c(0,1), </span><br><span class="line">                     labels&#x3D;c(&quot;auto&quot;, &quot;standard&quot;))  </span><br><span class="line"># 生成箱线图 </span><br><span class="line">boxplot(mpg ~ am.f *cyl.f, </span><br><span class="line">       data&#x3D;mtcars, </span><br><span class="line">       varwidth&#x3D;TRUE, </span><br><span class="line">       col&#x3D;c(&quot;gold&quot;,&quot;darkgreen&quot;), </span><br><span class="line">       main&#x3D;&quot;MPG Distribution by Auto Type&quot;, </span><br><span class="line">       xlab&#x3D;&quot;Auto Type&quot;, ylab&#x3D;&quot;Miles Per Gallon&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-5c91212fe36e63ad7f0dd73f3083fa82_720w.jpg" alt="img"></p>
<p><strong>(6) 小提琴图</strong></p>
<p>小提琴图是箱线图与核密度图的结合。 你可以使用vioplot包中的vioplot()函数绘制它。 请在第一次使用之前安装vioplot包。</p>
<p>vioplot()函数的使用格式为：</p>
<p>vioplot(x1, x2, … , names=, col=)</p>
<p>其中x1, x2, …表示要绘制的一个或多个数值向量（将为每个向量绘制一幅小提琴图）。参数names是小提琴图中标签的字符向量，而col是一个为每幅小提琴图指定颜色的向量。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">library(vioplot)  </span><br><span class="line">x1 &lt;- mtcars$mpg[mtcars$cyl&#x3D;&#x3D;4] </span><br><span class="line">x2 &lt;- mtcars$mpg[mtcars$cyl&#x3D;&#x3D;6] </span><br><span class="line">x3 &lt;- mtcars$mpg[mtcars$cyl&#x3D;&#x3D;8] </span><br><span class="line">vioplot(x1, x2, x3, </span><br><span class="line">        names&#x3D;c(&quot;4 cyl&quot;, &quot;6 cyl&quot;, &quot;8 cyl&quot;), </span><br><span class="line">        col&#x3D;&quot;gold&quot;) </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">title(&quot;Violin Plots of Miles Per Gallon&quot;, ylab&#x3D;&quot;Miles Per Gallon&quot;, </span><br><span class="line">       xlab&#x3D;&quot;Number of Cylinders&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-aa868d0531ad3a67f8834cf4b0f8a536_720w.jpg" alt="img"></p>
<p><strong>(7) 点图</strong></p>
<p>点图提供了一种在简单水平刻度上绘制大量有标签值的方法。你可以使用dotchart()函数创建点图，格式为：</p>
<p>dotchart(x, labels=)</p>
<p>其中的x是一个数值向量，而labels则是由每个点的标签组成的向量。你可以通过添加参数groups来选定一个因子，用以指定x中元素的分组方式。如果这样做，则参数gcolor可以控制不同组标签的颜色，cex可以控制标签的大小。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dotchart(mtcars$mpg, labels&#x3D;row.names(mtcars), cex&#x3D;.7, </span><br><span class="line">         main&#x3D;&quot;Gas Mileage for Car Models&quot;, </span><br><span class="line">         xlab&#x3D;&quot;Miles Per Gallon&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-021e1478a4881257d4b116a5c203430f_720w.jpg" alt="img"></p>
<p>分组、排序、着色后的点图</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- mtcars[order(mtcars$mpg),] </span><br><span class="line"> </span><br><span class="line">x$cyl &lt;- factor(x$cyl)  </span><br><span class="line"> </span><br><span class="line">x$color[x$cyl&#x3D;&#x3D;4] &lt;- &quot;red&quot; </span><br><span class="line">x$color[x$cyl&#x3D;&#x3D;6] &lt;- &quot;blue&quot; </span><br><span class="line">x$color[x$cyl&#x3D;&#x3D;8] &lt;- &quot;darkgreen&quot; </span><br><span class="line">dotchart(x$mpg,  </span><br><span class="line">          labels &#x3D; row.names(x),  </span><br><span class="line">          cex&#x3D;.7, </span><br><span class="line">          groups &#x3D; x$cyl, </span><br><span class="line">          gcolor &#x3D; &quot;black&quot;, </span><br><span class="line">          color &#x3D; x$color,  </span><br><span class="line">          pch&#x3D;19, </span><br><span class="line">          main &#x3D; &quot;Gas Mileage for Car Models\ngrouped by cylinder&quot;, </span><br><span class="line">          xlab &#x3D; &quot;Miles Per Gallon&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="/Pic/R%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89/v2-a5be3049f4c902914b18bd17b810f9ee_720w.jpg" alt="img"></p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>本次的R语言语法精讲（二）主要介绍了 R语言的数据的输入输出以及R语言内置的绘图语法。学完本文后，您将可以具备初步的R语言数据可视化的基本能力并结合R语言语法精讲（一）做简单的数据分析项目以及报告。</p>
<blockquote>
<p>本文转载自知乎：<a href="https://zhuanlan.zhihu.com/p/180425068" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/180425068</a></p>
</blockquote>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>版权声明： </strong>
          本博客所有文章除特别声明外，著作权归作者所有。转载请注明出处！
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://chenkai66.github.io/posts/5ad0b051.html" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/posts/c65daabc.html" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            泰坦尼克号生存率预测
          
        </div>
      </a>
    
    
      <a href="/posts/46623364.html" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">Paper Sorted</div>
      </a>
    
  </nav>

   
<!-- valine评论 -->
<div id="vcomments-box">
  <div id="vcomments"></div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>
<script>
  new Valine({
    el: "#vcomments",
    app_id: "TQy5bHTePagP10u5BBsesx61-gzGzoHsz",
    app_key: "O6UyJYxBFgMKQMjktBh4KGad",
    path: window.location.pathname,
    avatar: "monsterid",
    placeholder: "给我的文章加点评论吧~",
    recordIP: true,
  });
  const infoEle = document.querySelector("#vcomments .info");
  if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
    infoEle.childNodes.forEach(function (item) {
      item.parentNode.removeChild(item);
    });
  }
</script>
<style>
  #vcomments-box {
    padding: 5px 30px;
  }

  @media screen and (max-width: 800px) {
    #vcomments-box {
      padding: 5px 0px;
    }
  }

  #vcomments-box #vcomments {
    background-color: #fff;
  }

  .v .vlist .vcard .vh {
    padding-right: 20px;
  }

  .v .vlist .vcard {
    padding-left: 10px;
  }
</style>

 
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2020
        <i class="ri-heart-fill heart_icon"></i> chenk
      </li>
    </ul>
    <ul>
      <li>
        
        
        
        由 灰仔 强力驱动
        
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></s>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="言念君子"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->


<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: 'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto'
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.6/unpacked/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
  var ayerConfig = {
    mathjax: true
  }
</script>

<!-- Katex -->

<!-- busuanzi  -->


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->


<script src="/js/clickBoom2.js"></script>


<!-- CodeCopy -->


<link rel="stylesheet" href="/css/clipboard.css">

<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>


<!-- CanvasBackground -->


<script src="/js/dz.js"></script>



    
  </div>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"live2d-widget-model-haruto"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>

</html>